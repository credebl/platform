#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# ANSI colors
RED="\033[0;31m"
YELLOW="\033[0;33m"
CYAN="\033[0;36m"
GREEN="\033[0;32m"
RESET="\033[0m"

commit_msg_file=$1

# Guard: ensure commit message file exists
if [ -z "$commit_msg_file" ] || [ ! -f "$commit_msg_file" ]; then
  echo "‚ö†Ô∏è  No commit message file provided or file does not exist."
  echo "üëâ Skipping DCO sign-off check."
  exit 0
fi

if ! grep -q "Signed-off-by:" "$commit_msg_file"; then
  echo "${RED} Commit message missing Signed-off-by line ${RESET}"
  echo "${GREEN} Use: git commit -s ... ${RESET}"
  exit 1
fi
